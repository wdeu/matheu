# MathEU - Project-Specific Skills & Notes

**Project:** MathEU - Mental Math for Europe
**Repo:** https://github.com/wdeu/matheu
**Live:** https://matheu.netlify.app

---

## Architecture

### Component Structure
```
src/
â”œâ”€â”€ App.jsx                  # All state & logic, mode-based routing
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Header.jsx           # Settings bar (LanguageSwitcher + gear icon)
â”‚   â”œâ”€â”€ SettingsModal.jsx    # Settings modal with share button
â”‚   â”œâ”€â”€ MainMenu.jsx         # Menu mode (composes Header + SettingsModal)
â”‚   â”œâ”€â”€ QuizResults.jsx      # Results mode view
â”‚   â””â”€â”€ LevelComplete.jsx    # Level completion modal
â”œâ”€â”€ LanguageSwitcher.jsx     # Flag-based language selector
â”œâ”€â”€ LevelSelector.jsx        # Level training UI
â”œâ”€â”€ levelSystem.js           # Level logic & progression
â”œâ”€â”€ ttsService.js            # Web Speech API wrapper
â”œâ”€â”€ i18n.js                  # i18next config (8 languages)
â””â”€â”€ locales/
    â”œâ”€â”€ de/translation.json
    â”œâ”€â”€ en/translation.json
    â”œâ”€â”€ fr/translation.json
    â”œâ”€â”€ es/translation.json
    â”œâ”€â”€ it/translation.json
    â”œâ”€â”€ pl/translation.json
    â”œâ”€â”€ pt/translation.json
    â””â”€â”€ uk/translation.json
```

### Modes in App.jsx
- `menu` â†’ MainMenu
- `levels` â†’ LevelSelector
- `practice` â†’ practice view (inline in App.jsx)
- `quiz` â†’ quiz view (inline in App.jsx)
- `results` â†’ QuizResults
- `level-practice` â†’ level practice view (inline in App.jsx)
- `showLevelComplete` â†’ LevelComplete

---

## Languages (8 total)

| Code | Language   | Flag | TTS Voice |
|------|-----------|------|-----------|
| de   | German    | ðŸ‡©ðŸ‡ª   | de-DE     |
| en   | English   | ðŸ‡¬ðŸ‡§   | en-GB     |
| fr   | French    | ðŸ‡«ðŸ‡·   | fr-FR     |
| es   | Spanish   | ðŸ‡ªðŸ‡¸   | es-ES     |
| it   | Italian   | ðŸ‡®ðŸ‡¹   | it-IT     |
| pl   | Polish    | ðŸ‡µðŸ‡±   | pl-PL     |
| pt   | Portuguese| ðŸ‡µðŸ‡¹   | pt-PT     |
| uk   | Ukrainian | ðŸ‡ºðŸ‡¦   | uk-UA     |

### Adding a New Language
1. Create `src/locales/{code}/translation.json`
2. Import in `src/i18n.js` and add to resources
3. Add flag entry in `src/LanguageSwitcher.jsx`
4. Add TTS mapping in `src/ttsService.js` (`setLanguage()`)

---

## Key Patterns

### State stays in App.jsx
All state and business logic lives in App.jsx. Components receive props only.

### TTS Service
- Uses Web Speech API (browser-native)
- Language synced via `i18n.language` â†’ `ttsService.setLanguage()`
- Voice selection: prefers Google > Microsoft > exact match > first available

### Settings Modal Share
- Web Share API on mobile (`navigator.share`)
- Clipboard fallback on desktop (`navigator.clipboard.writeText`)

### Mobile Responsive
- Flag buttons: 1.5rem mobile, 1.75rem on 480px+
- Settings bar: `min-height: 44px`, flex-wrap for flags
- Problem display, inputs, buttons all use `clamp()` for responsive sizing

---

## Build & Deploy

```bash
npm run dev      # Dev server (localhost:3000)
npm run build    # Production build â†’ dist/
```

- Hosted on Netlify (auto-deploy from main)
- Config: `netlify.toml`

---

## Credits
- Original concept: [kopfrechnen](https://github.com/opdehost/kopfrechnen) by @opdehost
- Via: [@Vaeshkar](https://github.com/Vaeshkar/opdehost-kopfrechnen)
- Rebuilt from scratch as MathEU by Werner Deuermeier
